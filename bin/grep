#!/usr/bin/fish

. lib/opts.fish

opts ci $argv

set pattern $argv[1]
set files ''
if test (count $argv) -ge 2
    for file in $argv[2..-1]
        set files files (lib/path $file)
    end
else
    set files '-'
end

if test -n "$pattern"
    grep -h $flags -e $pattern $files | bin/rand; or exit $status
else
    echo invalid pattern or file
end
