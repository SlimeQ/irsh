#!/usr/bin/fish
#
. lib/file.fish
. lib/opts.fish

opts ci "$argv"

set pattern (echo $rest[1..-2])
set file (lib/path $rest[-1])

if test -n "$pattern" -a -n "$file" -a -f "$file"
    switch $status
        case 0
            grep $flags $pattern $file | sort -R | head -1
        case 1
            echo no matching lines
        case '*'
            echo grep error
    end
else
    echo invalid pattern or file
end
