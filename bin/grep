#!/usr/bin/fish

. lib/opts.fish

opts ci $argv

set pattern $pos[1]
set files
if test (count $pos) -ge 2
    for file in $pos[2..-1]
        set files $files (lib/path $file)
    end
else
    set files '-'
end

if test -n "$pattern"
    grep -h $flags -e $pattern $files
else
    echo invalid pattern or file
end
